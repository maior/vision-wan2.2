# 데이터셋 품질 평가 체크리스트 (학습 전)

**프로젝트**: Wan2.2 LoRA Fine-tuning with MBC Dataset
**평가 기준**: RAPA 2025 공식 품질지표
**평가 시점**: 학습 전 데이터셋 검증
**샘플 수**: 199,994개

---

## RAPA 6대 품질 특성

### ✅ 1. 형식성 (Formality)
**목표: 99% 이상**

#### 1.1 파일 유효성
- [ ] mp4 파일 손상 검사 (ffprobe로 전수 검사)
- [ ] JSON 파일 파싱 가능 여부
- **현재 상태**: 미측정
- **예상 소요**: 1일
- **우선순위**: High

#### 1.2 파일 포맷 적합성
- [ ] 비디오: mp4 형식 확인
- [ ] 메타데이터: JSON 형식 확인
- **현재 상태**: 미측정
- **예상 소요**: 1일
- **우선순위**: High

#### 1.3 파일 속성 적합성
- [ ] 해상도 메타데이터 vs 실제 일치 확인
- [ ] 프레임레이트 메타데이터 vs 실제 일치 확인
- [ ] 길이(duration) 메타데이터 vs 실제 일치 확인
- **현재 상태**: 미측정
- **예상 소요**: 2일
- **우선순위**: Medium

---

### ✅ 2. 다양성(통계) (Diversity - Statistical)
**목표: 분포 확인**

#### 2.1 장르별 분포
- [x] 예능, 드라마, 뉴스, 다큐멘터리 등 카테고리 분포 확인
- **현재 상태**: 분포 확인 완료 (QUALITY_ASSESSMENT_REPORT.md 참조)
- **상태**: ✅ 양호

#### 2.2 비디오 길이 분포
- [x] 평균: 20초 (목표)
- [x] 25초 이상: 2% 미만 (목표)
- **현재 상태**:
  - 평균: ~13초 (추정)
  - 25초 이상: 14.9% (29,800개)
- **상태**: ❌ 미달 - 트리밍 필요

#### 2.3 카테고리별 분포
- [x] 8개 중분류 균형 확인
- **현재 상태**: 확인 완료
- **상태**: ✅ 양호

---

### ✅ 3. 다양성(요건) (Diversity - Requirements)
**목표: 최소값 충족**

#### 3.1 비디오 데이터 총 시간
- [ ] 목표: 3,600시간 이상
- **현재 상태**: 추정 ~650시간 (82% 부족)
- **상태**: ❌ Critical - MBC와 추가 데이터 협의 또는 목표 재조정 필요
- **우선순위**: Critical

#### 3.2 비디오 평균 길이
- [ ] 목표: 20초 이상
- **현재 상태**: ~13초 (추정)
- **상태**: ❌ 미달 - 확인 필요
- **우선순위**: High

#### 3.3 캡션 최소 토큰 수
- [ ] 목표: 50토큰 이상
- **현재 상태**: 많은 샘플이 미달 (예: 16토큰)
- **상태**: ❌ 미달 - 캡션 개선 필요
- **우선순위**: High

#### 3.4 캡션 최소 문장 수
- [ ] 목표: 5문장 이상
- **현재 상태**: object_level 2-3문장 평균
- **상태**: ❌ 미달 - 캡션 확장 필요
- **우선순위**: Medium

---

### ✅ 4. 구문 정확성 (Syntactic Accuracy)
**목표: 99.5% 이상**

#### 4.1 JSON 스키마 준수
- [ ] 필수 필드 존재 확인 (resolution, length, caption_info 등)
- [ ] 데이터 타입 정확성 (string, number, array 등)
- **현재 상태**: 미측정
- **예상 소요**: 1일
- **우선순위**: High

#### 4.2 형식 정확성
- [ ] 타임코드 형식: HH:MM:SS.mm
- [ ] 날짜 형식: YYYY-MM-DD
- [ ] ID 형식: 숫자 또는 문자열
- **현재 상태**: 미측정
- **예상 소요**: 1일
- **우선순위**: Medium

---

### ✅ 5. 의미 정확성 (Semantic Accuracy)
**목표: 90% 이상**

#### 5.1 표현 적절성
- [ ] 캡션이 영상 내용을 적절히 표현하는가?
- [ ] 추상적 표현 vs 구체적 표현 비율
- **측정 방법**: 수동 샘플링 (500개 이상)
- **현재 상태**: 미측정
- **예상 소요**: 2주 (인력 2명)
- **우선순위**: Medium

#### 5.2 영상-설명문 일치성
- [ ] 캡션과 실제 영상 내용 일치 확인
- [ ] 미디어 타입 오류 확인 (비디오를 "이미지"라고 표현)
- **측정 방법**: 수동 샘플링 또는 데이터셋 CLIP Score
- **현재 상태**: 미측정
- **예상 소요**:
  - 수동: 2주
  - CLIP Score: 3일 (GPU 48시간)
- **우선순위**: Low (선택적)

#### 5.3 데이터셋 CLIP Score (선택 사항)
- [ ] MBC 캡션 vs MBC 실제 영상 프레임 CLIP Score
- [ ] 목표: 0.25 이상 (학습 가능 수준)
- **현재 상태**: 미측정
- **예상 소요**: 3일 (GPU 48시간, $200~$400)
- **우선순위**: Low (선택적)

---

### ⏳ 6. 유효성 (Validity)
**⚠️ 학습 후에만 측정 가능**

#### 6.1 CLIP Score (학습 후)
- 사용자 프롬프트 vs Wan2.2 생성 비디오
- 목표: ≥ 0.3
- **현재 상태**: 학습 전이므로 측정 불가
- **측정 시점**: 학습 완료 후

#### 6.2 FVD (학습 후)
- 실제 비디오 vs Wan2.2 생성 비디오
- 목표: ≤ 1140
- **현재 상태**: 학습 전이므로 측정 불가
- **측정 시점**: 학습 완료 후

---

## 전처리 체크리스트 (품질 평가 아님)

### 모델 요구사항 충족을 위한 전처리

#### 해상도 변환
- [ ] 1920×1080 → 1280×720 변환 (155,505개)
- **소요 시간**: 3일
- **이유**: Wan2.2 모델 지원 해상도

#### 비디오 트리밍
- [ ] 25초 초과 → 25초 이하로 트리밍 (29,800개)
- **소요 시간**: 2일
- **이유**: 메모리 효율 및 다양성(통계) 기준 충족

#### 메타데이터 보완 (선택)
- [ ] 키워드 자동 생성 (130,322개)
- [ ] OCR 텍스트 캡션 통합
- **소요 시간**: 2-3일
- **이유**: 검색성 향상 (학습에 직접 영향 없음)

---

## 우선순위별 실행 계획

### 🔴 Week 1-2: Critical (즉시 실행)
1. ✅ 비디오 총 시간 정확히 계산
   - 현재 추정치 650시간 vs 목표 3,600시간 확인
   - MBC와 추가 데이터 협의 또는 목표 재조정

2. ⚙️ 해상도 변환 (155,505개 → 3일)
   - 학습 전 필수 전처리

3. ⚙️ 비디오 트리밍 (29,800개 → 2일)
   - 다양성(통계) 기준 충족

### 🟠 Week 3-4: High (1-2주 내 실행)
4. ✅ 형식성 검증 (파일 유효성, 포맷) - 2일
5. ✅ 구문 정확성 검증 (JSON 스키마) - 1일
6. ✅ 캡션 토큰/문장 수 확인 및 개선 - 5일

### 🟡 Week 5-8: Medium (1-2개월 내 실행)
7. ✅ 파일 속성 정확성 검증 - 2일
8. ✅ 의미 정확성 수동 샘플링 - 2주

### 🟢 선택 사항 (품질 확인)
9. 📊 데이터셋 CLIP Score 측정 (학습 전 품질 확인) - 3일
10. ⚙️ 키워드/OCR 메타데이터 보완 - 2-3일

---

## 현재 품질 등급 (학습 전 데이터셋)

### 측정 가능 항목 점수
- ❌ 형식성: 0점 (미측정)
- ✅ 다양성(통계): 60점 (비디오 길이 분포 미달)
- ❌ 다양성(요건): 30점 (총 시간 82% 부족, 토큰/문장 수 미달)
- ❌ 구문 정확성: 0점 (미측정)
- ❌ 의미 정확성: 0점 (미측정)
- ⏳ 유효성: 학습 후 측정

### 종합 점수: 15/100 (F등급)
**⚠️ 단, 이것은 데이터셋 검증 미완료 상태입니다!**

### 실제 상태
- ✅ 데이터 수집 완료
- ❌ 데이터 검증 미완료
- ❌ 전처리 미완료
- ⏳ 학습 대기 중

---

## 다음 단계

### 1단계: 데이터셋 검증 및 전처리 (지금)
- 위 체크리스트 순차 실행
- 예상 기간: 4-8주

### 2단계: LoRA Fine-tuning
- V100 GPU 설정
- 학습 시작

### 3단계: 모델 평가 (학습 후)
- CLIP Score & FVD 측정
- RAPA 최종 품질 등급 판정
